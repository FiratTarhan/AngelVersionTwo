<div class="row">

    <div class="col-sm-12 d-flex justify-content-center flex-column py-1 ">
        <div class="card shadow-lg">
            <div class="card-body">
                <label class="d-flex align-items-center fs-7 fw-semibold mb-2">
                    <span>{{"Yetki_Rolleri" | translate}}</span>
                </label>

                <div class="d-flex">
                    <p-select [options]="roles" [(ngModel)]="selectedRole" optionLabel="Ad"
                        (ngModelChange)="selectRole(selectedRole)"
                        emptyFilterMessage="{{'Kayıt_Bulunamadı' | translate}}" [filter]="true" filterBy="Ad"
                        [showClear]="true" placeholder="{{'Bir Rol Seçiniz' | translate}}" class="w-100 md:w-56">
                        <ng-template #selectedItem let-selected>
                            <div class="flex items-center gap-2">
                                <div>{{ selectedRole.Ad }}</div>
                            </div>
                        </ng-template>
                        <ng-template let-item #item>
                            <div class="flex items-center gap-2">
                                <div>{{ item?.Ad }}</div>
                            </div>
                        </ng-template>
                    </p-select>
                    <!-- Ekle Buton -->
                    <div class="d-flex justify-content-end ps-3">
                        <button (click)="addRole()" pButton type="submit" label="Ekle" icon="pi pi-check"
                            class="p-button-sm"></button>
                    </div>
                </div>


                <div class="d-flex gap-2 flex-wrap pt-4">
                    <p-chip *ngFor="let item of splitRoles" [label]="item.Ad" [removable]="true"
                        (click)="onChipClick($event, item.ID)" (onRemove)="onChipRemove(item)"
                        [ngClass]="{'border border-1 border-danger': selectedChips.has(item.ID)}">
                    </p-chip>
                </div>



            </div>
        </div>
    </div>



    <div class="col-sm-12 py-5 d-flex justify-content-center">
        <div class="card shadow-lg">
            <div class="card-body">
                <div class="row">
                    <div *ngFor="let key of keys" class="col-sm-4 px-7 py-2">
                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                            <span>{{ key | translate }}</span>
                        </label>

                        <div class="border border-1 border-gray-300 rounded p-3">
                            <div *ngFor="let value of checkboxData[key]; let i = index"
                                class="form-check form-check-custom form-check-solid me-10">
                                <input type="checkbox" class="form-check-input h-15px w-15px"
                                    [(ngModel)]="value.checked" [id]="'chk' + key + i" />
                                <label class="form-check-label" [for]="'chk' + key + i">{{ getTooltipText(i) | translate
                                    }}</label>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="col-sm-12 py-1">
        <div class="card shadow-lg">
            <div class="card-body">
                <p-accordion>

                    <!-- Menü Yetkilendirme -->
                    <p-accordion-panel value="0">
                        <p-accordion-header>
                            <ng-template #toggleicon let-active="active">
                                @if (active) {
                                <i class="pi pi-minus"></i>
                                } @else {
                                <i class="pi pi-plus"></i>
                                }
                            </ng-template>
                            <span class="d-flex items-center gap-2 w-full align-items-center">
                                <i class="fa-solid fa-list text-danger"></i>
                                <span class="font-bold whitespace-nowrap">
                                    {{'Menü_Yetkilendirme' | translate}}
                                </span>
                            </span>
                        </p-accordion-header>

                        <p-accordion-content>
                            <!-- Search & Sort -->
                            <div class="d-flex justify-content-between align-items-center mb-3 gap-3 flex-wrap">
                                <div class="d-flex mb-5 mb-lg-0 position-relative ng-untouched ng-pristine ng-valid">
                                    <!--begin::Icon-->
                                    <i
                                        class="fa-solid fa-magnifying-glass fs-5 text-gray-500 position-absolute top-50 translate-middle-y ms-4"></i>
                                    <!--end::Icon-->

                                    <!--begin::Input-->
                                    <input type="text"
                                        class="form-control form-control-sm border-gray-200 bg-body ps-13 fs-7"
                                        [(ngModel)]="filterMenuText" placeholder="Arama...">
                                    <!--end::Input-->
                                </div>

                                <button class="btn btn-light btn-sm" (click)="sortMenu()">
                                    <i [class]="'pi ' + menuSortIcon"></i>
                                </button>
                            </div>

                            <div class="row g-3">
                                <div class="col-md-4"
                                    *ngFor="let item of menuAuthorizations | searchFilter:filterMenuText: ['ad', 'modul']">
                                    <div class="card h-100 border shadow-sm">
                                        <div
                                            class="card-body d-flex justify-content-between align-items-center px-6 py-4">
                                            <div>
                                                <h6 class="fw-bold mb-1">{{ item.ad }}</h6>
                                                <small class="text-muted">{{ item.modul }}</small>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input h-20px w-20px" type="checkbox"
                                                    [(ngModel)]="item.Goruntulenme" (change)="onCheckboxChange(item)" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </p-accordion-content>
                    </p-accordion-panel>

                    <!-- Vardiya Yetkilendirme -->
                    <p-accordion-panel value="1">
                        <p-accordion-header>
                            <ng-template #toggleicon let-active="active">
                                @if (active) {
                                <i class="pi pi-minus"></i>
                                } @else {
                                <i class="pi pi-plus"></i>
                                }
                            </ng-template>
                            <span class="d-flex items-center gap-2 w-full align-items-center">
                                <i class="fa-solid fa-calendar-days text-danger"></i>
                                <span class="font-bold whitespace-nowrap">
                                    {{'Vardiya_Yetkilendirme' | translate}}
                                </span>
                            </span>
                        </p-accordion-header>

                        <p-accordion-content>
                            <!-- Search & Sort -->
                            <div class="d-flex justify-content-between align-items-center mb-3 gap-3 flex-wrap">
                                <div class="d-flex mb-5 mb-lg-0 position-relative ng-untouched ng-pristine ng-valid"
                                    autocomplete="off">
                                    <!--begin::Icon-->
                                    <i
                                        class="fa-solid fa-magnifying-glass fs-5 text-gray-500 position-absolute top-50 translate-middle-y ms-4"></i>
                                    <!--end::Icon-->

                                    <!--begin::Input-->
                                    <input type="text"
                                        class="form-control form-control-sm border-gray-200 bg-body ps-13 fs-7"
                                        [(ngModel)]="filterShiftText" placeholder="Arama...">
                                    <!--end::Input-->
                                </div>

                                <button class="btn btn-light btn-sm" (click)="sortShifts()">
                                    <i [class]="'pi ' + menuSortIcon"></i>
                                </button>
                            </div>
                            <div class="row g-3">
                                <div class="col-md-4"
                                    *ngFor="let item of shiftAuthorizations | searchFilter:filterShiftText: ['Aciklama', 'MesaiID']">
                                    <div class="card h-100 border shadow-sm">
                                        <div
                                            class="card-body d-flex justify-content-between align-items-center px-6 py-4">
                                            <div>
                                                <h6 class="fw-bold mb-1">{{ item.Aciklama }}</h6>
                                                <small class="text-muted">{{ item.MesaiID }}</small>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input h-20px w-20px" type="checkbox"
                                                    [(ngModel)]="item.Goruntulenme" (change)="onCheckboxChange(item)" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </p-accordion-content>
                    </p-accordion-panel>

                    <!-- İzin Yetkilendirme -->
                    <p-accordion-panel value="2">
                        <p-accordion-header>
                            <ng-template #toggleicon let-active="active">
                                @if (active) {
                                <i class="pi pi-minus"></i>
                                } @else {
                                <i class="pi pi-plus"></i>
                                }
                            </ng-template>
                            <span class="d-flex items-center gap-2 w-full align-items-center">
                                <i class="fa-solid fa-umbrella-beach text-danger"></i>
                                <span class="font-bold whitespace-nowrap">
                                    {{'İzin_Yetkilendirme' | translate}}
                                </span>
                            </span>
                        </p-accordion-header>

                        <p-accordion-content>
                            <!-- Search & Sort -->
                            <div class="d-flex justify-content-between align-items-center mb-3 gap-3 flex-wrap">
                                <!-- <p-floatlabel variant="on" class="flex-grow-1">
                                    <p-iconfield>
                                        <p-inputicon class="pi pi-search" />
                                        <input pInputText id="menuSearch" [(ngModel)]="filterVacationText"
                                            autocomplete="off" />
                                    </p-iconfield>
                                    <label for="menuSearch">Search</label>
                                </p-floatlabel> -->

                                <div class="d-flex mb-5 mb-lg-0 position-relative ng-untouched ng-pristine ng-valid"
                                    autocomplete="off">
                                    <!--begin::Icon-->
                                    <i
                                        class="fa-solid fa-magnifying-glass fs-5 text-gray-500 position-absolute top-50 translate-middle-y ms-4"></i>
                                    <!--end::Icon-->

                                    <!--begin::Input-->
                                    <input type="text"
                                        class="form-control form-control-sm border-gray-200 bg-body ps-13 fs-7"
                                        [(ngModel)]="filterVacationText" placeholder="Arama...">
                                    <!--end::Input-->
                                </div>

                                <button class="btn btn-light btn-sm" (click)="sortVacations()">
                                    <i [class]="'pi ' + menuSortIcon"></i>
                                </button>
                            </div>
                            <div class="row g-3">
                                <div class="col-md-4"
                                    *ngFor="let item of vacationAuthorizations | searchFilter:filterVacationText: ['Aciklama', 'IzinID']">
                                    <div class="card h-100 border shadow-sm">
                                        <div
                                            class="card-body d-flex justify-content-between align-items-center px-6 py-4">
                                            <div>
                                                <h6 class="fw-bold mb-1">{{ item.Aciklama }}</h6>
                                                <small class="text-muted">{{ item.IzinID }}</small>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input h-20px w-20px" type="checkbox"
                                                    [(ngModel)]="item.Goruntulenme" (change)="onCheckboxChange(item)" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </p-accordion-content>
                    </p-accordion-panel>

                    <!-- Rapor Yetkilendirme -->
                    <p-accordion-panel value="3">
                        <p-accordion-header>
                            <ng-template #toggleicon let-active="active">
                                @if (active) {
                                <i class="pi pi-minus"></i>
                                } @else {
                                <i class="pi pi-plus"></i>
                                }
                            </ng-template>
                            <span class="d-flex items-center gap-2 w-full align-items-center">
                                <i class="fa-solid fa-table text-danger"></i>
                                <span class="font-bold whitespace-nowrap">
                                    {{'Rapor_Yetkilendirme' | translate}}
                                </span>
                            </span>
                        </p-accordion-header>

                        <p-accordion-content>
                            <!-- Search & Sort -->
                            <div class="d-flex justify-content-between align-items-center mb-3 gap-3 flex-wrap">
                                <!-- <p-floatlabel variant="on" class="flex-grow-1">
                                    <p-iconfield>
                                        <p-inputicon class="pi pi-search" />
                                        <input pInputText id="menuSearch" [(ngModel)]="filterReportText"
                                            autocomplete="off" />
                                    </p-iconfield>
                                    <label for="menuSearch">Search</label>
                                </p-floatlabel> -->

                                <div class="d-flex mb-5 mb-lg-0 position-relative ng-untouched ng-pristine ng-valid"
                                    autocomplete="off">
                                    <!--begin::Icon-->
                                    <i
                                        class="fa-solid fa-magnifying-glass fs-5 text-gray-500 position-absolute top-50 translate-middle-y ms-4"></i>
                                    <!--end::Icon-->

                                    <!--begin::Input-->
                                    <input type="text"
                                        class="form-control form-control-sm border-gray-200 bg-body ps-13 fs-7"
                                        [(ngModel)]="filterReportText" placeholder="Arama...">
                                    <!--end::Input-->
                                </div>

                                <button class="btn btn-light btn-sm" (click)="sortReports()">
                                    <i [class]="'pi ' + menuSortIcon"></i>
                                </button>
                            </div>
                            <div class="row g-3">
                                <div class="col-md-4"
                                    *ngFor="let item of reportAuthorizations | searchFilter:filterReportText: ['ad', 'Grupad']">
                                    <div class="card h-100 border shadow-sm">
                                        <div
                                            class="card-body d-flex justify-content-between align-items-center px-6 py-4">
                                            <div>
                                                <h6 class="fw-bold mb-1">{{ item.ad }}</h6>
                                                <small class="text-muted">{{ item.Grupad }}</small>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input h-20px w-20px" type="checkbox"
                                                    [(ngModel)]="item.Goruntulenme" (change)="onCheckboxChange(item)" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </p-accordion-content>
                    </p-accordion-panel>
                </p-accordion>
            </div>
        </div>
    </div>
</div>